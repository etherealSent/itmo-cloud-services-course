# Лабораторная 2

## Шаг 1. Написать “плохой” Dockerfile, в котором есть не менее трех “bad practices” по написанию докерфайлов

### BadPractice 1 : Использование неофициального Docker образа. Использование неопределенной версии node. Использование полноценной ОС(большой размер и более небезопасно)

**неофициальный докер-образ**
```
FROM ubuntu

RUN apt-get update && apt-get install -y \
    node \
    && rm -rf /var/lib/apt/lists/*
```
**неопределенная версия**
```
FROM node
```
**полноценная ОС**
```
FROM node:17.0.1
```
**правильное использование**
```
FROM node:17.0.1-alpine
```

### BadPractice 2 : Неиспользование кэширования слоев докер контейнера(повторная устнановка зависимостей)

```
FROM node:16-alpine

WORKDIR /app

COPY myapp /app

RUN npm install

CMD ["nginx", "-g", "daemon off;"]
```

Первые 2 строчки восстанавливаются из кэша, однако при изменении любой строчки кода, при копировании myapp
восстановление с кэша отменится для всех следующих слоев, поэтому зависимости будут установлены заново

**правильное использование**

```
FROM node:16-alpine AS build

WORKDIR /app

COPY package.json package-lock.json ./

RUN npm install

COPY ..

CMD ["nginx", "-g", "daemon off;"]
```

Теперь отмена восстановления из кэша произойдет только если что-то изменится в зависимостях
файлы package.json package-lock.json

### BadPractice 3 : Хранение лишних файлов в контейнере


